<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">
    <script src="lib/vue.js"></script>
    <script src="element-ui/lib/index.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="lib/jquery-3.7.1.min.js"></script>
    <script src="lib/axios-0.18.0.js"></script>

</head>

<body>
<form id="avatarForm" enctype="multipart/form-data">
    <input type="file" name="avatar" accept="image/*" required>
    <button type="submit">上传头像</button>
</form>

<div id="resultMessage"></div>
</body>

<script>
    $(document).ready(function() {
        $('#avatarForm').on('submit', function(event) {
            event.preventDefault();

            var formData = new FormData(this);
            formData.append('username', 'JohnDoe'); // 添加用户名字段
            $.ajax({
                url: 'upload', // 替换为实际的后端接口地址
                type: 'POST',
                data: formData,
                contentType: false, // 必须，否则jQuery会自动设置Content-Type
                processData: false, // 必须，防止jQuery对FormData进行预处理
                success: function(response) {
                    if (response.success) {
                        $('#resultMessage').text('头像上传成功！');
                        // 可以在此处更新页面上的头像显示
                    } else {
                        $('#resultMessage').text('头像上传失败：' + response.message);
                    }
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    $('#resultMessage').text('上传过程中发生错误：' + textStatus);
                }
            });
        });
    });
</script>
</html>